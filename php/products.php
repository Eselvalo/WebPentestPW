<?php
session_start();

// Connect to the database
$host = 'localhost'; // replace with your MySQL hostname or IP address
$user = 'root'; // replace with your MySQL username
$password = ''; // replace with your MySQL password
$dbname = 'ecommerce'; // replace with your database name

$conn = new mysqli($host, $user, $password, $dbname);

// Check if the connection was successful
if ($conn->connect_error) {
  die("Connection failed: " . $conn->connect_error);
}

// Retrieve the product information from the database
$sql = "SELECT id, name, description, price FROM products";
$result = $conn->query($sql);

// Generate HTML to display the product information on the page
?>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce Website</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
  
<h1>Products</h1>
  <table>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Price</th>
      <th>Action</th>
    </tr>
    <?php while ($row = $result->fetch_assoc()) { ?>
      <tr>
        <td><?php echo $row['name']; ?></td>
        <td><?php echo $row['description']; ?></td>
        <td>$<?php echo $row['price']; ?></td>
        <td>
          <form action="cart.php" method="POST">
            <input type="hidden" name="product_id" value="<?php echo $row['id']; ?>">
            <input type="number" name="quantity" value="1" min="1">
            <input type="submit" value="Add to Cart">
          </form>
        </td>
      </tr>
    <?php } ?>
  </table>
  <form action="index.php" method="post">
        <button type="submit" name="home">Home</button>
  </form>
      
  <section class="featured-products">
    <h2>Bestseller</h2>
  <?php while ($row = $result->fetch_assoc()) { ?>
      <div class="product-grid">
      <div class="product-card">
                    <img src="img/product2.jpg" alt="Product 2">
                    <h3><?php echo $row['name']; ?></h3>
                    <p>$<?php echo $row['price']; ?></p>
                </div>
 

      </div>
       
    <?php } ?>
  </section>
 
</body>
</html>

<?php
// Close the database connection
//$conn->close();
?>
